<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
     <!-- 

       - 네스티드 라우터 -

       라우터로 페이지를 이동할 때 최소 2개 이상의 컴포넌트를 화면에 나타낼 수 있다.
       상위 컴포넌트 1개에 하위 컴포턴트 1개를 포함하는 구조로 구상한다.

       네스티드 라우터를 이용하면 URL에 따라서 컴포넌트의 하위 컴포넌트가 다르게 표시된다.

      -->   

      <!--네스티드 라우더 구현하는 코드-->

    <div id="app">
        <router-view></router-view>  
        <!--User 컴포넌트가 뿌려질 영역-->
        <!--
            (1) <div id="app">에 <router-view>를 등록하여 User 컴포넌트가 뿌려질 영역을 정의.
        -->
    </div>

      
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.2/dist/vue.js"></script>
    <script src="https://unpkg.com/vue-router@3.0.1/dist/vue-router.js"></script> <!--라우터 CDN 추가-->
    <script>
    
    /* 컴포넌트 내용 정의 S ------------------------------------------ */
        var User = {

            template: `
                <div>
                    User Component
                    <router-view></router-view> 
                </div>
            `
        };
    
        var UserProfile = { template: '<p>User Profile Component</p>' };
        var UserPost = { template: '<p>User Post Component</p>' };

    /* 컴포넌트 내용 정의 E ------------------------------------------ 
       
       (2) User, UserPost, UserProfile 컴포넌트의 내용을 각 객체에 정의.
          컴포넌트가 전환된 것을 확인할 수 있게 template 속성을 컴포넌트에 추가.
         **** User 컴포넌트의 template에 하위 컴포넌트를 표시할 <router-view>가 하나 더 존재 ******
    */




    /* 네스티드 라우팅 정의 S ------------------------------------------ */
    var routes = [
        {
            path: '/user',
            component: User,
            children: [
                {
                    path: 'posts',
                    component: UserPost
                },
                {
                    path: 'profile',
                    component: UserProfile
                },
            ]
        }
    ]
    /* 네스티드 라우팅 정의 E ------------------------------------------ 
       (3) routes에 라우더 정보를 정의.
          1. path 속성에는 네스티드 라우터를 실행하는 기본 URL을 /user로 설정하고 상위 컴포넌트는 User 컴포넌트로 지정한다.
          2. children 속성에는 URL 값 /user 다음에 올 URL에 따라 표시될 하위 컴포넌트를 정의한다.
             /user/posts인 경우 UserPost를 표시
             /user/profile인 경우 UserProfile을 표시
            하도록 설정.
    */



    
    /* 뷰 라우터 정의 S ------------------------------------------ */
    var router = new VueRouter({
        routes
    });
    /* 뷰 라우터 정의 E ------------------------------------------ 
       (4) 뷰 라우터를 새로 하나 생성하고
           앞에서 정의한 라우터 정보를 담은 객체 routes를 정의한다.
    */




    
    /* 뷰 인스턴스에 라우터 추가 S ------------------------------------------ */
    var app = new Vue({
        router
    }).$mount('#app');
    /* 뷰 인스턴스에 라우터 추가 E ------------------------------------------ 
       (5) 마지막으로 인스턴스를 하나 생성하고
           라우터 정보 router를 포함한다.
           그리고 app이라는 id를 가진 요소에 인스턴스를 붙여 화면에 나타낸다.
    */


    </script>
</body>
</html>